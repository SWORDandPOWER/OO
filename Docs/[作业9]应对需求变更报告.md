
# 书店管理系统应对需求变更报告

#### Homework 2: 案例设计

Link: [案例设计报告](https://github.com/isph/OO/blob/master/Docs/%5B%E4%BD%9C%E4%B8%9A2%5D%E6%A1%88%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%8A%A5%E5%91%8A.pdf)

#### Homework 3: 业务目标与涉众分析

Link: [业务目标与涉众分析报告](https://github.com/isph/OO/blob/master/Docs/%5B%E4%BD%9C%E4%B8%9A3%5D%E4%B9%A6%E5%BA%97%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E6%B6%89%E4%BC%97%E5%88%86%E6%9E%90%E6%8A%A5%E5%91%8A.pdf)

#### Homework 4: 书店管理系统需求分析报告

Link: [书店管理系统需求分析报告](https://github.com/isph/OO/blob/master/Docs/%5B%E4%BD%9C%E4%B8%9A4%5D%E4%B9%A6%E5%BA%97%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90%E6%8A%A5%E5%91%8A.md)

#### Homework 5: 书店管理系统系统分析报告

Link: [书店管理系统系统分析报告](https://github.com/isph/OO/blob/master/Docs/%5B%E4%BD%9C%E4%B8%9A5%5D%E4%B9%A6%E5%BA%97%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E7%B3%BB%E7%BB%9F%E5%88%86%E6%9E%90%E6%8A%A5%E5%91%8A.md)

#### Homework 6: 书店管理系统系统设计报告

Link: [书店管理系统系统设计报告](https://github.com/isph/OO/blob/master/Docs/%5B%E4%BD%9C%E4%B8%9A6%5D%E4%B9%A6%E5%BA%97%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E6%8A%A5%E5%91%8A.md)

#### Homework 8: 需求变更报告

Link: [需求变更报告](https://github.com/isph/OO/blob/master/Docs/%5B%E4%BD%9C%E4%B8%9A8%5D%E9%9C%80%E6%B1%82%E5%8F%98%E6%9B%B4%E6%8A%A5%E5%91%8A.md)

***
***

## 需求变更内容

1. 希望添加顾客的预订功能, 对于系统中当前没有, 而顾客有需要的书, 顾客可以申请预订. 店长根据实际情况, 接受或者拒绝顾客的申请.
2. 添加第三方登录功能, 例如微信/微博等方式.
3. 希望完善这部分功能: 店长可以根据书店销售情况调整销售策略, 如限时折扣/捆绑销售等.

## 需求变更分析

首先对变更后的需求重新进行业务目标与涉众分析, 从需求变更内容可以明显看出, 系统没有增加新的参与者, 因此系统参与者仍然保持原状, 即

|编号|参与者|
|:----:|:----:|
|1|书店店主|
|2|顾客|
|2|供货商|

然后对变更后的需求重新进行需求分析, 考虑到需求变更对原有系统产生的影响, 变更后的需求可以进一步详细解释:

1. "对于系统当中没有, 而顾客有需要的书, 顾客可以申请预定.", 首先顾客在系统所有书籍中进行搜索, 并且搜索结果为空, 即找不到自己搜索的书籍, 此时由顾客自己判定自己是否需要这本书籍, 如果需要, 则在此基础上系统提供一个新的功能, 顾客可以填写该书籍的相关信息进行预订并提交;

2. "店长根据实际情况, 接受或者拒绝顾客的申请.", 当顾客提交预订申请后, 店长应当能够收到顾客的预订申请请求, 此时对于顾客的每个申请请求, 店长根据自己的判断, 可以在系统中选择接受或者拒绝顾客的申请, 如果店长拒绝顾客的申请, 则本次的申请无效并在店长待处理申请订单中删除, 如果店长接受顾客的申请, 则店长对这本书进行进货;

3. 添加第三方登陆功能, 将系统与第三方系统对接, 增加登陆方式, 是一个增加功能的需求变更;

4. 希望完善的功能, 对于原需求中存在的功能, 由于部分未完成, 属于一个需求更改和增加的需求变更.

## 需求变更设计

对于分析1, 由于可以把顾客的申请请求当做一个新的订单类型来进行处理, 因此增加一个新的订单类 ```Reserve```, 其中可以保存该书籍的所有信息, 这样可以直接扩展而不需要对数据库表做改动.

对于分析2, 由于增加了```Reserve```类用来保存顾客的申请订单, 因此店主可以直接共享此类, 读取相关信息, 如果店主拒绝了此订单则修改订单中的状态值, 标记为拒绝; 如果店主接受了此订单, 也修改此订单中的状态值并标记为接受, 并开始准备进货流程.

对于分析3, 目前正在与甲方进行沟通;

对于分析4, 设计调整策略, 添加策略类```Strategy```, 将策略类放入```Book```类中, 因为该策略是针对这种书籍的销售策略, 策略类```Strategy```中包含关于时间的属性```time```, ```deadline```, 关于捆绑销售的属性```ISBN```等, 这样每种书籍也可以开启多种销售策略, 利于进一步扩展.

## 需求变更总结

本次需求变更并未对已有系统产生大的影响, 由于之前的良好设计, 从数据库表到系统类都较少有改动, 主要以增加和扩展为主, 很好的满足了开闭原则, 对扩展开放, 对修改关闭, 因此第一阶段的分析和设计是比较成功和有效的, 很好地应对了需求变更的挑战.